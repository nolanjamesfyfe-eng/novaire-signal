<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Novaire Signal ‚Äî Daily Brief</title>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>‚ö°</text></svg>">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
  <link rel="manifest" href="/manifest.json">
  <meta name="theme-color" content="#0a0a0c">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="Signal ‚ö°">
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,500;0,600;1,300;1,400;1,500&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#0a0a0c;--surface:#111116;--border:#1e1e26;--text:#e8e6f0;--dim:#8a8699;--mute:#4a4760;
      --gold:#c9a84c;--gold-dim:rgba(201,168,76,.12);--gold-mid:rgba(201,168,76,.25);
      --green:#2a9d8f;--red:#e63946;--blue:#5a7bc4;--violet:#9470c8;
      --sans:'Inter',sans-serif;--serif:'Cormorant Garamond',serif;--r:6px;
    }
    html{scroll-behavior:smooth}
    body{font-family:var(--sans);background:var(--bg);color:var(--text);-webkit-font-smoothing:antialiased;padding:32px 16px;font-size:14px;line-height:1.5}
    body{font-family:var(--sans);background:var(--bg);color:var(--text);-webkit-font-smoothing:antialiased;padding:32px 16px;font-size:14px;line-height:1.5}
    .container{max-width:720px;margin:0 auto}

    .header-brand{text-align:center;padding-bottom:20px}

    .dateline{text-align:center;padding:0 0 28px;margin-bottom:28px;border-bottom:1px solid var(--border)}
    .dateline .date{font-size:.7rem;letter-spacing:.2em;text-transform:uppercase;color:var(--dim)}
    .dateline .gen{font-size:.6rem;color:var(--mute);margin-top:3px}

    .card{background:var(--surface);border:1px solid var(--border);border-radius:var(--r);padding:20px;margin-bottom:14px}
    .card-title{font-size:.6rem;font-weight:600;letter-spacing:.24em;text-transform:uppercase;color:var(--gold);margin-bottom:16px;display:flex;align-items:center;gap:8px}
    .card-title::after{content:'';flex:1;height:1px;background:linear-gradient(90deg,var(--gold-mid),transparent)}

    .quote{margin-bottom:8px;padding-left:10px;border-left:1px solid var(--gold-mid)}
    .quote:last-child{margin-bottom:0}
    .quote-type{font-size:.6rem;color:var(--gold);text-transform:uppercase;letter-spacing:.14em;margin-bottom:2px;font-weight:600}
    .quote-text{font-family:var(--serif);font-size:1.1rem;font-style:italic;color:var(--text);line-height:1.55}
    .quote-author{font-size:.68rem;color:var(--dim);margin-top:3px}
    #quotes-card{padding:14px 16px}

    .weather-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:8px}
    .weather-item{text-align:center;padding:12px 6px;background:var(--bg);border:1px solid var(--border);border-radius:var(--r)}
    .weather-item .city{font-size:.65rem;color:var(--dim);margin-bottom:5px;letter-spacing:.04em}
    .weather-item .temp{font-size:1.25rem;font-weight:500;color:var(--gold);font-family:var(--serif)}
    .weather-item .condition{font-size:.62rem;color:var(--dim);margin-top:3px;line-height:1.3}

    .thai-news-compact{margin-top:14px;padding:12px;background:var(--bg);border:1px solid var(--border);border-radius:var(--r)}
    .thai-news-header{font-size:.58rem;color:var(--gold);text-transform:uppercase;letter-spacing:.16em;margin-bottom:8px;font-weight:600}
    .thai-news-item{font-size:.82rem;color:var(--text);padding:5px 0;border-bottom:1px solid var(--border);line-height:1.45}
    .thai-news-item:last-child{border-bottom:none}

    .star-sign{padding:2px 0}
    .star-sign-symbol{display:none}
    .star-sign-main{font-family:var(--serif);font-size:.95rem;color:var(--gold);display:flex;align-items:center;gap:6px;margin-bottom:4px}
    .star-sign-main::before{content:attr(data-symbol);font-size:.85rem}
    .star-sign-range{display:inline;font-size:.65rem;color:var(--dim);letter-spacing:.08em;text-transform:uppercase;margin-left:4px;vertical-align:middle}
    .star-sign-desc{font-size:.78rem;color:var(--dim);line-height:1.55;margin-top:6px}

    .headline{padding:8px 0;border-bottom:1px solid var(--border)}
    .headline:last-child{border-bottom:none}
    .headline-num{display:inline-block;width:18px;height:18px;background:var(--gold-dim);color:var(--gold);border-radius:2px;text-align:center;line-height:18px;font-size:.62rem;font-weight:600;margin-right:8px}
    .headline-text{font-size:.86rem;color:var(--text)}

    .portfolio-summary{display:grid;grid-template-columns:repeat(3,1fr);gap:10px;margin-bottom:10px}
    .psum-item{background:var(--bg);border:1px solid var(--border);border-radius:var(--r);padding:12px;text-align:center}
    .psum-label{font-size:.58rem;color:var(--dim);text-transform:uppercase;letter-spacing:.12em;margin-bottom:4px}
    .psum-value{font-family:var(--serif);font-size:1.35rem;font-weight:400}

    .expand-btn{width:100%;background:none;border:1px solid var(--border);color:var(--dim);font-size:.65rem;letter-spacing:.12em;text-transform:uppercase;padding:8px;cursor:pointer;border-radius:var(--r);transition:all .15s;font-family:var(--sans);margin-bottom:10px}
    .expand-btn:hover{border-color:var(--gold);color:var(--gold)}
    .holdings-table-wrap{display:none}
    .holdings-table-wrap.open{display:block}

    .portfolio-table{width:100%;border-collapse:collapse;font-size:.78rem}
    .portfolio-table th{text-align:left;padding:7px 5px;font-size:.58rem;font-weight:600;color:var(--dim);text-transform:uppercase;letter-spacing:.1em;border-bottom:1px solid var(--border)}
    .portfolio-table td{padding:7px 5px;border-bottom:1px solid rgba(255,255,255,.025)}
    .portfolio-table tr:hover{background:rgba(255,255,255,.015)}
    .ticker{font-weight:600;color:var(--gold);font-size:.82rem}
    .positive{color:var(--green)}
    .negative{color:var(--red)}
    .fallback-badge{font-size:.55rem;color:var(--mute);vertical-align:middle;margin-left:3px}

    .totals-row{display:flex;justify-content:space-between;margin-top:16px;padding-top:14px;border-top:1px solid var(--border)}
    .total-item{text-align:center}
    .total-label{font-size:.58rem;color:var(--dim);text-transform:uppercase;letter-spacing:.1em}
    .total-value{font-family:var(--serif);font-size:1.4rem;font-weight:400;margin-top:3px}
    .total-value.cad{color:var(--green)}
    .total-value.usd{color:var(--gold)}

    .allocation-section{display:flex;align-items:center;gap:24px;margin-top:20px;padding-top:16px;border-top:1px solid var(--border)}
    .pie-chart{flex-shrink:0}
    .allocation-legend{flex:1;display:grid;grid-template-columns:repeat(2,1fr);gap:6px}
    .legend-item{display:flex;align-items:center;gap:6px;font-size:.72rem}
    .legend-dot{width:8px;height:8px;border-radius:50%;flex-shrink:0}
    .legend-pct{color:var(--dim);margin-left:auto}

    .catalyst-item{padding:8px 0;border-bottom:1px solid var(--border);display:flex;align-items:baseline;flex-wrap:wrap;gap:2px;line-height:1.4}
    .catalyst-item:last-child{border-bottom:none}
    .catalyst-ticker{font-weight:600;color:var(--gold);font-size:.85rem;white-space:nowrap}
    .catalyst-sep{color:var(--dim);font-size:.8rem}
    .catalyst-badge{color:var(--gold);font-size:.75rem;opacity:.8;white-space:nowrap}
    .catalyst-headline{font-size:.8rem;color:var(--text);line-height:1.4}
    .radar-label{font-size:.65rem;letter-spacing:.1em;text-transform:uppercase;color:var(--gold);opacity:.7;margin-bottom:6px;margin-top:2px}
    .radar-item{display:flex;align-items:baseline;flex-wrap:wrap;gap:2px;padding:5px 0;border-bottom:1px solid var(--border);line-height:1.4}
    .radar-item:last-child{border-bottom:none}
    .radar-ticker{font-weight:600;color:var(--gold);font-size:.8rem;white-space:nowrap;min-width:42px}
    .radar-sep{color:var(--dim);font-size:.75rem;white-space:nowrap}
    .radar-idea{font-size:.78rem;color:var(--text);line-height:1.4}
    .radar-source{font-size:.68rem;color:var(--gold);opacity:.65;font-style:italic;white-space:nowrap}
    .catalyst-source{font-size:.62rem;color:var(--dim);margin-top:2px}
    .no-news{color:var(--dim);font-style:italic;font-size:.78rem;margin-left:6px}

    .commodities-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:10px}
    .commodity-item{background:var(--bg);padding:12px;border:1px solid var(--border);border-radius:var(--r);text-align:center}
    .commodity-name{font-size:.62rem;text-transform:uppercase;letter-spacing:.1em;margin-bottom:5px;font-weight:600}
    .commodity-price{font-family:var(--serif);font-size:1.2rem;font-weight:400;margin-bottom:2px}
    .commodity-unit{font-size:.6rem;color:var(--dim)}
    .commodity-change{font-size:.72rem;margin-top:3px}
    .c-gold{color:#c9a84c}.c-silver{color:#b8b8b8}.c-copper{color:#b87333}
    .c-oil{color:#8b7355}.c-palladium{color:#ccc}.c-uranium{color:#7fc87f}

    .crypto-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:8px}
    .crypto-item{background:var(--bg);padding:10px 8px;border:1px solid var(--border);border-radius:var(--r);text-align:center}
    .crypto-symbol{font-size:.62rem;font-weight:600;text-transform:uppercase;letter-spacing:.12em;margin-bottom:4px}
    .crypto-price{font-family:var(--serif);font-size:1.05rem;font-weight:400;margin-bottom:2px}
    .crypto-change{font-size:.68rem;margin-top:2px}

    .radar-item{display:flex;align-items:flex-start;gap:10px;padding:9px 0;border-bottom:1px solid var(--border)}
    .radar-item:last-child{border-bottom:none}
    .radar-ticker{font-size:.7rem;color:var(--gold);margin-left:5px}
    .fresh{background:rgba(61,158,106,.12);color:#3d9e6a;border:1px solid rgba(61,158,106,.2)}
    .stale{background:rgba(106,103,122,.1);color:var(--dim);border:1px solid var(--border)}

    .rec-grid{display:grid;grid-template-columns:1fr 1fr;gap:14px}
    .rec-item{background:var(--bg);padding:16px;border:1px solid var(--border);border-radius:var(--r)}
    .rec-label{font-size:.58rem;color:var(--gold);text-transform:uppercase;letter-spacing:.16em;margin-bottom:7px;font-weight:600}
    .rec-title{font-family:var(--serif);font-size:1.05rem;color:var(--text);margin-bottom:3px}
    .rec-meta{font-size:.68rem;color:var(--blue);margin-bottom:5px}
    .rec-summary{font-size:.76rem;color:var(--dim);line-height:1.45}

    .thai-word-box{display:flex;align-items:center;justify-content:center;gap:14px;padding:12px;background:var(--bg);border:1px solid var(--border);border-radius:var(--r)}
    .thai-word-box .word{font-family:var(--serif);font-size:1.1rem;color:var(--gold)}
    .thai-word-box .dot{color:var(--mute)}
    .thai-word-box .meaning{font-size:.78rem;color:var(--dim)}
    .sat-word-box{padding:14px;background:var(--bg);border:1px solid var(--border);border-radius:var(--r)}
    .sat-word{font-family:var(--serif);font-size:1.2rem;color:var(--gold);font-weight:500;margin-bottom:6px}
    .sat-def{font-size:.82rem;color:var(--text);margin-bottom:10px;font-style:italic}
    .sat-sentence{font-size:.78rem;color:var(--dim);line-height:1.5;border-left:2px solid var(--gold-mid);padding-left:10px}
    .sat-source{font-size:.68rem;color:var(--mute);margin-top:8px;text-align:right}

    .fx-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:8px;margin-top:4px}
    .fx-item{background:var(--bg);border:1px solid var(--border);border-radius:var(--r);padding:10px 8px;text-align:center;font-size:.78rem;color:var(--dim)}
    .fx-item .fx-ccy{font-size:.6rem;text-transform:uppercase;letter-spacing:.1em;margin-bottom:4px;color:var(--dim)}
    .fx-rate{display:block;font-family:'Courier New',monospace;font-size:.95rem;font-weight:600;color:var(--gold);margin-top:2px}

    .feed-controls{display:flex;align-items:center;justify-content:space-between;margin-bottom:12px}
    .feed-refresh{font-size:.6rem;color:var(--dim);letter-spacing:.08em;cursor:pointer;background:none;border:1px solid var(--border);color:var(--dim);padding:4px 8px;border-radius:var(--r);font-family:var(--sans)}
    .feed-refresh:hover{border-color:var(--gold);color:var(--gold)}
    .feed-status{font-size:.62rem;color:var(--dim);font-style:italic}
    .feed-item{padding:12px 0;border-bottom:1px solid var(--border)}
    .feed-item:last-child{border-bottom:none}
    .feed-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:5px}
    .feed-author{display:flex;align-items:center;gap:7px}
    .feed-avatar{width:26px;height:26px;border-radius:50%;object-fit:cover;flex-shrink:0;background:var(--border)}
    .feed-name{font-size:.78rem;font-weight:600;color:var(--text)}
    .feed-handle{font-size:.68rem;color:var(--dim)}
    .feed-time{font-size:.64rem;color:var(--dim)}
    .feed-text{font-size:.84rem;color:var(--text);line-height:1.5;word-break:break-word;display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden}
    .feed-stats{display:flex;gap:12px;margin-top:6px}
    .feed-stat{font-size:.64rem;color:var(--dim)}
    .feed-stat span{color:var(--gold)}
    .feed-link{display:inline-block;margin-top:5px;font-size:.64rem;color:var(--gold);text-decoration:none;opacity:.6}
    .feed-link:hover{opacity:1}
    .feed-empty{text-align:center;padding:20px;color:var(--dim);font-size:.82rem}
    .feed-loading{text-align:center;padding:20px;color:var(--dim);font-size:.82rem}
    .feed-loading::after{content:'...';animation:dots 1.2s steps(3,end) infinite}
    @keyframes dots{0%,100%{content:'.'}33%{content:'..'}66%{content:'...'}}
    .feed-filter{display:flex;flex-wrap:wrap;gap:5px;margin-bottom:10px}
    .feed-tag{font-size:.6rem;padding:3px 7px;border:1px solid var(--border);color:var(--dim);cursor:pointer;background:none;letter-spacing:.06em;border-radius:var(--r);font-family:var(--sans)}
    .feed-tag.active,.feed-tag:hover{border-color:var(--gold);color:var(--gold);background:var(--gold-dim)}

    .footer{text-align:center;padding:40px 0 24px;border-top:1px solid var(--border);margin-top:28px}
    .footer-logo{font-family:var(--serif);font-size:1.8rem;font-weight:300;letter-spacing:.18em;text-transform:uppercase;color:var(--text);margin-bottom:4px}
    .footer-logo span{color:var(--gold);font-style:italic}
    .footer-tagline{font-size:.62rem;color:var(--dim);letter-spacing:.14em;text-transform:uppercase}
    .footer-sub{font-size:.58rem;color:var(--mute);margin-top:6px}
    .eco-links{display:flex;justify-content:center;gap:20px;margin-top:12px;flex-wrap:wrap}
    .eco-link{font-size:.7rem;color:var(--gold);text-decoration:none;opacity:.7;transition:opacity .15s;letter-spacing:.06em}
    .eco-link:hover{opacity:1}

    @media(max-width:600px){
      .weather-grid{grid-template-columns:repeat(2,1fr)}
      .commodities-grid{grid-template-columns:repeat(2,1fr)}
      .crypto-grid{grid-template-columns:repeat(2,1fr)}
      .fx-grid{grid-template-columns:repeat(2,1fr)}
      .allocation-section{flex-direction:column}
      .rec-grid{grid-template-columns:1fr}
      .portfolio-summary{grid-template-columns:repeat(3,1fr)}
    }
  </style>
</head>
<body>
<div class="container">

  <!-- HEADER BRANDING -->
  <div class="header-brand">
    <div class="footer-logo">Novaire <span>Signal</span></div>
    <div style="font-family:var(--serif);font-size:.9rem;font-style:italic;color:var(--gold);opacity:0.7;letter-spacing:.04em;margin-top:2px;">Deciphering through the noise.</div>
  </div>

  <!-- DATE / GENERATION LINE -->
  <div class="dateline">
    <div class="date">Sunday, February 22, 2026</div>
    <!-- removed generated timestamp -->
  </div>

  <!-- LATEST FROM NOVAIRE INK -->
  <a href="https://novaireink.com/#when-you-dont-write" style="display:block;text-decoration:none;text-align:center;padding:10px 16px;margin:8px 0;opacity:0.85;">
    <div style="font-family:var(--sans);font-size:.5rem;letter-spacing:.25em;text-transform:uppercase;color:#666;margin-bottom:5px;">‚ú¶ New on Novaire Ink</div>
    <div style="font-family:var(--serif);font-size:.95rem;color:var(--gold);line-height:1.3;">When You Don't Write, You Are Wrong</div>
    <div style="font-family:var(--serif);font-size:.7rem;color:#888;margin-top:3px;font-style:italic;">Bitcoin, Gold, Geopolitics, Nuclear & the AI Renaissance ‚Üí</div>
  </a>

  <!-- QUOTES (2 per day ‚Äî client-side localStorage dedup) -->
  <div class="card">
    <div class="card-title">üìú Quotes</div>
    <div id="quote-investing" class="quote">
      <div class="quote-type">Investing</div>
      <div class="quote-text" id="qt-inv-text"></div>
      <div class="quote-author" id="qt-inv-auth"></div>
    </div>
    <div id="quote-psychology" class="quote">
      <div class="quote-type">Psychology</div>
      <div class="quote-text" id="qt-psy-text"></div>
      <div class="quote-author" id="qt-psy-auth"></div>
    </div>
  </div>

  <!-- WEATHER + THAILAND NEWS -->
  <div class="card">
    <div class="card-title">üå§ Weather</div>
    <div class="weather-grid">
      
        <div class="weather-item">
          <div class="city">üáπüá≠ Bangkok</div>
          <div class="temp">28¬∞C</div>
          <div class="condition">Clear Sky ‚òÄÔ∏è</div>
          <div class="condition" style="margin-top:2px;font-style:italic">Cool Season</div>
        </div>
        <div class="weather-item">
          <div class="city">üá®üá¥ Medell√≠n</div>
          <div class="temp">23¬∞C</div>
          <div class="condition">Overcast ‚òÅÔ∏è</div>
          <div class="condition" style="margin-top:2px;font-style:italic">Eternal Spring</div>
        </div>
        <div class="weather-item">
          <div class="city">üá®üá¶ Edmonton</div>
          <div class="temp">-19¬∞C</div>
          <div class="condition">Overcast ‚òÅÔ∏è</div>
          <div class="condition" style="margin-top:2px;font-style:italic">Winter</div>
        </div>
        <div class="weather-item">
          <div class="city">üá∫üáæ Montevideo</div>
          <div class="temp">24¬∞C</div>
          <div class="condition">Overcast ‚òÅÔ∏è</div>
          <div class="condition" style="margin-top:2px;font-style:italic">Summer</div>
        </div>
    </div>
  </div>

  <!-- FX RATES -->
  <div class="card">
    <div class="card-title">üí± FX Rates ‚Äî 1 USD =</div>
    <div class="fx-grid">
      
        <div class="fx-item">
          <div class="fx-ccy">üá®üá¶ CAD</div>
          <span class="fx-rate">1.368</span>
        </div>
        <div class="fx-item">
          <div class="fx-ccy">üáπüá≠ THB</div>
          <span class="fx-rate">31.160</span>
        </div>
        <div class="fx-item">
          <div class="fx-ccy">üá¶üá∫ AUD</div>
          <span class="fx-rate">1.411</span>
        </div>
        <div class="fx-item">
          <div class="fx-ccy">üá®üá¥ COP</div>
          <span class="fx-rate">3,702.000</span>
        </div>
        <div class="fx-item">
          <div class="fx-ccy">üá™üá∫ EUR</div>
          <span class="fx-rate">0.850</span>
        </div>
        <div class="fx-item">
          <div class="fx-ccy">üá∑üá∫ RUB</div>
          <span class="fx-rate">76.650</span>
        </div>
        <div class="fx-item">
          <div class="fx-ccy">üá∞üá∑ KRW</div>
          <span class="fx-rate">1,447.750</span>
        </div>
        <div class="fx-item">
          <div class="fx-ccy">üáØüáµ JPY</div>
          <span class="fx-rate">155.160</span>
        </div>
    </div>
  </div>

  <!-- STAR SIGN ‚Äî inline symbol + name, compact -->
  <div class="card">
    <div class="star-sign">
      <div class="star-sign-main" data-symbol="‚ôì">Pisces<span class="star-sign-range">Feb 19 ‚Äì Mar 20</span></div>
      <div class="star-sign-desc">Intuitive, compassionate, and creative ‚Äî Pisces feel the currents others cannot see.</div>
    </div>
  </div>

  <!-- ZEROHEDGE -->
  <div class="card">
    <div class="card-title">üì∞ ZeroHedge ‚Äî Top Headlines</div>
    
        <div class="headline">
          <span class="headline-num">1</span>
          <a href="https://www.zerohedge.com/geopolitical/blockchain-ball-and-chain-are-we-being-borgd" class="headline-text" style="text-decoration:none;color:var(--text)" target="_blank">From Blockchain To Ball-And-Chain: Are We Being Borg'd?</a>
        </div>
        <div class="headline">
          <span class="headline-num">2</span>
          <a href="https://www.zerohedge.com/geopolitical/amb-huckabee-claims-israel-has-biblical-right-conquer-all-middle-east" class="headline-text" style="text-decoration:none;color:var(--text)" target="_blank">Amb. Huckabee Claims Israel Has 'Biblical Right' To Conquer Whole Middle East</a>
        </div>
        <div class="headline">
          <span class="headline-num">3</span>
          <a href="https://www.zerohedge.com/energy/japans-36-billion-bet-us-energy-dominance" class="headline-text" style="text-decoration:none;color:var(--text)" target="_blank">Japan's $36 Billion Bet On US Energy Dominance</a>
        </div>
        <div class="headline">
          <span class="headline-num">4</span>
          <a href="https://www.zerohedge.com/markets/boards-are-replacing-ceos-younger-replacements-fastest-pace-over-decade" class="headline-text" style="text-decoration:none;color:var(--text)" target="_blank">Boards Are Replacing CEOs At The Fastest Pace In Over A Decade</a>
        </div>
  </div>

  <!-- SIGNAL FEED -->
  <div class="card">
    <div class="card-title">üì° Signal Feed ‚Äî Top 5 by Engagement</div>
    <div class="feed-controls">
      <div class="feed-status" id="feed-status">Loading‚Ä¶</div>
      <button class="feed-refresh" onclick="loadFeed(true)" title="Feed updates every 4 hours ¬∑ filtered to last 4h ¬∑ ranked by likes + retweets">‚Üª Refresh</button>
    </div>
    <div class="feed-filter" id="feed-filter"></div>
    <div id="signal-feed">
      <div class="feed-loading">Fetching signals</div>
    </div>
  </div>

  <script>
  (function() {
    let allPosts = [];
    let activeFilter = null;
    const CACHE_KEY = 'novaire_feed_v4';  // bumped ‚Äî busts stale localStorage
    const CACHE_TTL = 4 * 60 * 1000;    // 4min cache ‚Äî matches refresh cadence

    function timeAgo(iso) {
      const d = new Date(iso);
      const diff = (Date.now() - d.getTime()) / 1000;
      if (diff < 60) return Math.floor(diff) + 's ago';
      if (diff < 3600) return Math.floor(diff/60) + 'm ago';
      if (diff < 86400) return Math.floor(diff/3600) + 'h ago';
      return Math.floor(diff/86400) + 'd ago';
    }

    function fmtNum(n) {
      if (!n) return '0';
      if (n >= 1000) return (n/1000).toFixed(1) + 'k';
      return String(n);
    }

    function escHtml(s) {
      return String(s).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;');
    }

    // Enforce display order: zerohedge(1), TheEconomist(2), KobeissiLetter(3), engagement(4,5)
    function sortBySlot(posts) {
      return [...posts].sort((a, b) => (a.slot_order || 99) - (b.slot_order || 99));
    }

    function renderFeed(posts) {
      const container = document.getElementById('signal-feed');
      if (!posts.length) {
        container.innerHTML = '<div class="feed-empty">No recent posts found. Try refreshing.</div>';
        return;
      }
      container.innerHTML = posts.map(p => `
        <div class="feed-item">
          <div class="feed-header">
            <div class="feed-author">
              ${p.avatar ? `<img class="feed-avatar" src="${escHtml(p.avatar)}" alt="" loading="lazy" onerror="this.style.display='none'">` : '<div class="feed-avatar"></div>'}
              <div>
                <div class="feed-name">${escHtml(p.author)}</div>
                <div class="feed-handle">@${escHtml(p.handle)}</div>
              </div>
            </div>
            <div class="feed-time">${timeAgo(p.createdAt)}</div>
          </div>
          <div class="feed-text">${escHtml(p.text)}</div>
          <div class="feed-stats">
            <div class="feed-stat">‚ô• <span>${fmtNum(p.likes)}</span></div>
            <div class="feed-stat">‚Ü∫ <span>${fmtNum(p.retweets)}</span></div>
          </div>
          <a class="feed-link" href="${escHtml(p.url)}" target="_blank" rel="noopener">View on X ‚Üí</a>
        </div>
      `).join('');
    }

    function renderFilter() {
      const bar = document.getElementById('feed-filter');
      const handles = [...new Set(allPosts.map(p => p.handle))].sort();
      bar.innerHTML = `<button class="feed-tag${!activeFilter?' active':''}" onclick="window._feedFilter(null)">All</button>` +
        handles.map(h => `<button class="feed-tag${activeFilter===h?' active':''}" onclick="window._feedFilter('${escHtml(h)}')">${escHtml('@'+h)}</button>`).join('');
    }

    window._feedFilter = function(handle) {
      activeFilter = handle;
      renderFilter();
      renderFeed(handle ? allPosts.filter(p => p.handle === handle) : allPosts);
    };

    async function loadFeed(force) {
      const status = document.getElementById('feed-status');
      const now = Date.now();
      if (!force) {
        try {
          const cached = localStorage.getItem(CACHE_KEY);
          if (cached) {
            const { ts, data } = JSON.parse(cached);
            if (now - ts < CACHE_TTL && data.length > 0) {
              allPosts = sortBySlot(data);
              renderFilter();
              renderFeed(activeFilter ? allPosts.filter(p=>p.handle===activeFilter) : allPosts);
              status.textContent = data.length + ' posts ¬∑ cached ' + timeAgo(new Date(ts).toISOString());
              return;
            }
          }
        } catch(e) {}
      }
      status.textContent = 'Fetching signals‚Ä¶';
      document.getElementById('signal-feed').innerHTML = '<div class="feed-loading">Fetching signals</div>';
      try {
        const resp = await fetch('/feed.json');
        if (!resp.ok) throw new Error('HTTP ' + resp.status);
        const json = await resp.json();
        if (!json.ok) throw new Error(json.error || 'API error');
        allPosts = sortBySlot(json.posts);
        try { localStorage.setItem(CACHE_KEY, JSON.stringify({ ts: now, data: allPosts })); } catch(e) {}
        renderFilter();
        renderFeed(activeFilter ? allPosts.filter(p=>p.handle===activeFilter) : allPosts);
        const fetchedAt = json.fetchedAt ? new Date(json.fetchedAt) : new Date();
        const ageMin = Math.floor((Date.now() - fetchedAt.getTime()) / 60000);
        const ageStr = ageMin < 2 ? 'just now' : ageMin < 60 ? ageMin + 'm ago' : Math.floor(ageMin/60) + 'h ago';
        const windowHours = json.windowHours || 4;
        status.textContent = 'Top ' + allPosts.length + ' by engagement ¬∑ last ' + windowHours + 'h ¬∑ updated ' + ageStr;
      } catch(err) {
        status.textContent = 'Feed unavailable';
        document.getElementById('signal-feed').innerHTML = '<div class="feed-empty">Could not load feed: ' + err.message + '</div>';
      }
    }
    document.readyState === 'loading'
      ? document.addEventListener('DOMContentLoaded', () => loadFeed(false))
      : loadFeed(false);
  })();
  </script>

  <!-- PORTFOLIO removed ‚Äî now at /portfolio -->

  <!-- CATALYSTS ‚Äî Top 3 only, fresh news highlighted -->
  <div class="card">
    <div class="card-title">üîç Catalysts ‚Äî Top 3 Holdings</div>
    
            <div class="catalyst-item">
              <span class="catalyst-ticker">HG ¬∑ GLO ¬∑ FVL</span>
              <span class="catalyst-sep"> ‚Äî </span>
              <span class="catalyst-headline" style="color:var(--dim);font-style:italic">No news within 48 hours.</span>
            </div>
  </div>

  <!-- RADAR IDEAS ‚Äî 3 crypto + 3 resource, live from Reddit/News/4Chan -->
  <div class="card">
    <div class="card-title">üéØ Radar Ideas</div>
    <div class="radar-label">ü™ô Micro-Cap Crypto</div>
    <div class="radar-item"><span class="radar-source">[r/defi]</span> <span class="radar-idea">Best cross-chain swap you're using right now?</span></div>
    <div class="radar-label" style="margin-top:12px">‚õèÔ∏è Micro-Cap Resources</div>
    <div class="radar-item"><span class="radar-source">[r/SilverSqueeze]</span> <span class="radar-idea">Everything you need to know about silver‚Ä¶</span></div>
    <div style="margin-top:8px;font-size:.6rem;color:var(--mute)">Live ¬∑ Reddit ¬∑ News ¬∑ 4Chan /biz/ ¬∑ Barbell plays $500‚Äì$1K ¬∑ Updates every build</div>
  </div>

  <!-- COMMODITIES -->
  <div class="card">
    <div class="card-title">ü™ô Commodities</div>
    <div class="commodities-grid">
      
        <div class="commodity-item">
          <div class="commodity-name c-gold">Gold</div>
          <div class="commodity-price c-gold">$5,081</div>
          <div class="commodity-unit">/oz</div>
          <div class="commodity-change"><span style="color:var(--dim)">‚Äî</span></div>
        </div>
        <div class="commodity-item">
          <div class="commodity-name c-silver">Silver</div>
          <div class="commodity-price c-silver">$82.34</div>
          <div class="commodity-unit">/oz</div>
          <div class="commodity-change"><span style="color:var(--dim)">‚Äî</span></div>
        </div>
        <div class="commodity-item">
          <div class="commodity-name c-copper">Copper</div>
          <div class="commodity-price c-copper">$5.8390</div>
          <div class="commodity-unit">/lb</div>
          <div class="commodity-change"><span style="color:var(--dim)">‚Äî</span></div>
        </div>
        <div class="commodity-item">
          <div class="commodity-name c-oil">Oil (WTI)</div>
          <div class="commodity-price c-oil">$66.48</div>
          <div class="commodity-unit">/bbl</div>
          <div class="commodity-change"><span style="color:var(--dim)">‚Äî</span></div>
        </div>
        <div class="commodity-item">
          <div class="commodity-name c-palladium">Palladium</div>
          <div class="commodity-price c-palladium">$1,780</div>
          <div class="commodity-unit">/oz</div>
          <div class="commodity-change"><span style="color:var(--dim)">‚Äî</span></div>
        </div>
        <div class="commodity-item">
          <div class="commodity-name c-uranium">Uranium</div>
          <div class="commodity-price c-uranium">$89.40</div>
          <div class="commodity-unit">/lb</div>
          <div class="commodity-change"><span style="color:var(--dim)">‚Äî</span></div>
        </div>
    </div>
  </div>

  <!-- CRYPTO ‚Äî 30% smaller -->
  <div class="card">
    <div class="card-title">üåê Crypto</div>
    <div class="crypto-grid">
      
        <div class="crypto-item">
          <div class="crypto-symbol" style="color:#f7931a">BTC</div>
          <div class="crypto-price" style="color:#f7931a">$67,937</div>
          <div class="crypto-change"><span class="negative">-0.38%</span></div>
        </div>
        <div class="crypto-item">
          <div class="crypto-symbol" style="color:#627eea">ETH</div>
          <div class="crypto-price" style="color:#627eea">$1,965</div>
          <div class="crypto-change"><span class="negative">-0.59%</span></div>
        </div>
        <div class="crypto-item">
          <div class="crypto-symbol" style="color:#9945ff">SOL</div>
          <div class="crypto-price" style="color:#9945ff">$84.29</div>
          <div class="crypto-change"><span class="negative">-1.35%</span></div>
        </div>
        <div class="crypto-item">
          <div class="crypto-symbol" style="color:#346aa9">XRP</div>
          <div class="crypto-price" style="color:#346aa9">$1.4070</div>
          <div class="crypto-change"><span class="negative">-2.36%</span></div>
        </div>
        <div class="crypto-item">
          <div class="crypto-symbol" style="color:#0098ea">TON</div>
          <div class="crypto-price" style="color:#0098ea">$1.3370</div>
          <div class="crypto-change"><span class="positive">+0.07%</span></div>
        </div>
        <div class="crypto-item">
          <div class="crypto-symbol" style="color:#f4b728">ZEC</div>
          <div class="crypto-price" style="color:#f4b728">$249.22</div>
          <div class="crypto-change"><span class="negative">-3.71%</span></div>
        </div>
    </div>
  </div>


    <!-- RECOMMENDATIONS ‚Äî client-side localStorage rotation -->
  <div class="card">
    <div class="card-title">üé¨ Recommendations</div>
    <div class="rec-grid">
      <div class="rec-item">
        <div class="rec-label">üì∫ Trending Now</div>
        <div class="rec-title">The Night Agent</div>
        <div class="rec-meta">Netflix Movies ¬∑ 2023‚Äì ¬∑ Action, Drama, Thriller</div>
        <div class="rec-summary">Low-level FBI agent Peter Sutherland works in the basement of the White House manning a phone that never rings - until the night i</div>
      </div>
      <div class="rec-item">
        <div class="rec-label">üìñ Trending Book</div>
        <div class="rec-title">1929: Inside the Greatest Crash in Wall Street History--and </div>
        <div class="rec-meta">Andrew Ross Sorkin ¬∑ Amazon Business #1</div>
        <div class="rec-summary">Amazon Business Bestseller #1.</div>
      </div>
    </div>
    <div style="margin-top:12px;font-size:.68rem;color:var(--dim);text-align:center">
      Updated daily ¬∑ Netflix trending + Amazon Business #1
    </div>
  </div>

  <!-- THAI WORD OF THE DAY -->
  <div class="card">
    <div class="card-title">üáπüá≠ Thai Word of the Day</div>
    <div class="thai-word-box">
      <span class="word">‡∏û‡∏±‡∏í‡∏ô‡∏≤ (pat-ta-na)</span>
      <span class="dot">‚Ä¢</span>
      <span class="meaning">develop, progress ‚Äî always moving forward</span>
    </div>
  </div>

  <!-- SPANISH WORD OF THE DAY -->
  <div class="card">
    <div class="card-title">üá™üá∏ Spanish Word of the Day</div>
    <div class="thai-word-box">
      <span class="word">Negocio</span>
      <span class="dot" style="font-size:.7rem;color:var(--mute)">(neh-GO-see-oh)</span>
      <span class="dot">‚Ä¢</span>
      <span class="meaning">business ‚Äî from the Latin 'negotium' (denial of leisure). Hustle never changes.</span>
    </div>
  </div>

  <!-- THAILAND NEWS -->
  <div class="card">
    <div class="thai-news-compact">
      <div class="thai-news-header">üáπüá≠ Thailand News</div>
      <div class="thai-news-item"><a href="https://www.bangkokpost.com/" style="color:var(--text);text-decoration:none" target="_blank">Bangkok Post - The world‚Äôs window on Thailand</a></div>
    </div>
  </div>

  <!-- DAILY MOTIVATION -->
  <div class="card">
    <div class="card-title">üí™ Daily Motivation</div>
    <div class="quote" style="border-left-color:rgba(90,123,196,.35)">
      <div class="quote-type" style="color:var(--blue)">Kaizen Mindset</div>
      <div class="quote-text">"The only way to do great work is to love what you do."</div>
      <div class="quote-author">‚Äî Steve Jobs</div>
    </div>
  </div>

  <!-- FOOTER BRANDING -->
  <div class="footer">
    <div class="footer-logo">Novaire <span>Signal</span></div>
    <div class="footer-tagline">Deciphering through the noise.</div>
    <div class="eco-links">
      <a href="https://novaireink.com" class="eco-link">Novaire Ink</a>
      <a href="https://evolution-fund.vercel.app" class="eco-link">Evolution Fund</a>
    </div>
    <div class="footer-sub">Live data ¬∑ Updated every 2 hours ¬∑ 24/7</div>
  </div>

</div>

<!-- CLIENT-SIDE JS: Quote dedup + Holdings toggle + Recs rotation -->
<script>
// ‚îÄ‚îÄ Quote arrays (30+ per category) ‚îÄ‚îÄ
const QUOTES_INVESTING = [
  {text:"The stock market is a device for transferring money from the impatient to the patient.", author:"Warren Buffett"},
  {text:"In the short run, the market is a voting machine. In the long run, it is a weighing machine.", author:"Benjamin Graham"},
  {text:"It's not whether you're right or wrong, but how much money you make when you're right and how much you lose when you're wrong.", author:"George Soros"},
  {text:"The four most dangerous words in investing are: 'this time it's different.'", author:"Sir John Templeton"},
  {text:"Price is what you pay. Value is what you get.", author:"Warren Buffett"},
  {text:"Know what you own, and know why you own it.", author:"Peter Lynch"},
  {text:"Risk comes from not knowing what you're doing.", author:"Warren Buffett"},
  {text:"An investment in knowledge pays the best interest.", author:"Benjamin Franklin"},
  {text:"The most contrarian thing of all is not to oppose the crowd but to think for yourself.", author:"Peter Thiel"},
  {text:"Compound interest is the eighth wonder of the world. He who understands it, earns it; he who doesn't, pays it.", author:"Albert Einstein"},
  {text:"The individual investor should act consistently as an investor and not as a speculator.", author:"Benjamin Graham"},
  {text:"Wide diversification is only required when investors do not understand what they are doing.", author:"Warren Buffett"},
  {text:"Our favourite holding period is forever.", author:"Warren Buffett"},
  {text:"It takes 20 years to build a reputation and five minutes to ruin it.", author:"Warren Buffett"},
  {text:"The time of maximum pessimism is the best time to buy.", author:"Sir John Templeton"},
  {text:"Markets can remain irrational longer than you can remain solvent.", author:"John Maynard Keynes"},
  {text:"Be fearful when others are greedy, and greedy when others are fearful.", author:"Warren Buffett"},
  {text:"The biggest risk is not taking any risk.", author:"Mark Zuckerberg"},
  {text:"Invest in yourself. Your career is the engine of your wealth.", author:"Paul Clitheroe"},
  {text:"The goal of a successful trader is to make the best trades. Money is secondary.", author:"Alexander Elder"},
  {text:"Do not save what is left after spending; instead spend what is left after saving.", author:"Warren Buffett"},
  {text:"Financial freedom is available to those who learn about it and work for it.", author:"Robert Kiyosaki"},
  {text:"Bottoms in the investment world don't end with four-year lows; they end with ten- or fifteen-year lows.", author:"Jim Rogers"},
  {text:"The secret to investing is to figure out the value of something and then pay a lot less.", author:"Joel Greenblatt"},
  {text:"The stock market is filled with individuals who know the price of everything, but the value of nothing.", author:"Philip Fisher"},
  {text:"If you have trouble imagining a 20% loss in the stock market, you shouldn't be in stocks.", author:"John Bogle"},
  {text:"The key to making money in stocks is not to get scared out of them.", author:"Peter Lynch"},
  {text:"The intelligent investor is a realist who sells to optimists and buys from pessimists.", author:"Benjamin Graham"},
  {text:"In investing, what is comfortable is rarely profitable.", author:"Robert Arnott"},
  {text:"Successful investing is about managing risk, not avoiding it.", author:"Benjamin Graham"},
  {text:"I will tell you how to become rich. Be fearful when others are greedy. Be greedy when others are fearful.", author:"Warren Buffett"},
  {text:"The way to get started is to quit talking and begin doing.", author:"Walt Disney"},
];
const QUOTES_PSYCHOLOGY = [
  {text:"The cave you fear to enter holds the treasure you seek.", author:"Joseph Campbell"},
  {text:"Until you make the unconscious conscious, it will direct your life and you will call it fate.", author:"Carl Jung"},
  {text:"Between stimulus and response there is a space. In that space is our power to choose our response.", author:"Viktor Frankl"},
  {text:"The curious paradox is that when I accept myself just as I am, then I can change.", author:"Carl Rogers"},
  {text:"What we resist persists.", author:"Carl Jung"},
  {text:"The first step toward change is awareness. The second step is acceptance.", author:"Nathaniel Branden"},
  {text:"Comparison is the thief of joy.", author:"Theodore Roosevelt"},
  {text:"The greatest discovery of any generation is that a human being can alter their life by altering their attitudes.", author:"William James"},
  {text:"Inaction breeds doubt and fear. Action breeds confidence and courage.", author:"Dale Carnegie"},
  {text:"Your task is not to seek for love, but merely to seek and find all the barriers within yourself that you have built against it.", author:"Rumi"},
  {text:"The measure of intelligence is the ability to change.", author:"Albert Einstein"},
  {text:"We cannot solve our problems with the same thinking we used when we created them.", author:"Albert Einstein"},
  {text:"The mind is everything. What you think you become.", author:"Buddha"},
  {text:"Knowing yourself is the beginning of all wisdom.", author:"Aristotle"},
  {text:"You cannot swim for new horizons until you have courage to lose sight of the shore.", author:"William Faulkner"},
  {text:"It is not death that a man should fear, but he should fear never beginning to live.", author:"Marcus Aurelius"},
  {text:"Absorb what is useful, discard what is not, add what is uniquely your own.", author:"Bruce Lee"},
  {text:"The only journey is the one within.", author:"Rainer Maria Rilke"},
  {text:"He who knows others is wise; he who knows himself is enlightened.", author:"Lao Tzu"},
  {text:"You are not a drop in the ocean. You are the entire ocean in a drop.", author:"Rumi"},
  {text:"Everything can be taken from a man but one thing: the last of the human freedoms ‚Äî to choose one's attitude.", author:"Viktor Frankl"},
  {text:"The snake which cannot cast its skin has to die.", author:"Friedrich Nietzsche"},
  {text:"The impediment to action advances action. What stands in the way becomes the way.", author:"Marcus Aurelius"},
  {text:"We suffer more in imagination than in reality.", author:"Seneca"},
  {text:"Man is not worried by real problems so much as by his imagined anxieties about real problems.", author:"Epictetus"},
  {text:"The intuitive mind is a sacred gift and the rational mind is a faithful servant.", author:"Albert Einstein"},
  {text:"Hardships often prepare ordinary people for an extraordinary destiny.", author:"C.S. Lewis"},
  {text:"If you change the way you look at things, the things you look at change.", author:"Wayne Dyer"},
  {text:"You don't have to control your thoughts. You just have to stop letting them control you.", author:"Dan Millman"},
  {text:"Resilience is not about bouncing back ‚Äî it's about bouncing forward.", author:"Sheryl Sandberg"},
  {text:"Act the way you'd like to be and soon you'll be the way you act.", author:"George W. Crane"},
  {text:"Not all those who wander are lost.", author:"J.R.R. Tolkien"},
];

function getQuoteForToday(storageKey, quotes) {
  const today = new Date().toDateString();
  const dayKey  = 'nv_' + storageKey + '_date';
  const idxKey  = 'nv_' + storageKey + '_idx';
  const seenKey = 'nv_' + storageKey + '_seen';
  try {
    if (localStorage.getItem(dayKey) === today) {
      return quotes[parseInt(localStorage.getItem(idxKey) || '0') % quotes.length];
    }
    let seen = [];
    try { seen = JSON.parse(localStorage.getItem(seenKey) || '[]'); } catch(e) {}
    let avail = quotes.map((_,i) => i).filter(i => !seen.includes(i));
    if (!avail.length) { seen = []; avail = quotes.map((_,i) => i); }
    const seed = today.split('').reduce((a,c) => (a * 31 + c.charCodeAt(0)) & 0xffffff, 0);
    const idx = avail[seed % avail.length];
    seen.push(idx);
    localStorage.setItem(seenKey, JSON.stringify(seen));
    localStorage.setItem(dayKey, today);
    localStorage.setItem(idxKey, String(idx));
    return quotes[idx];
  } catch(e) {
    const seed = new Date().toDateString().split('').reduce((a,c) => (a*31+c.charCodeAt(0))&0xffffff,0);
    return quotes[seed % quotes.length];
  }
}

(function renderQuotes() {
  const qi = getQuoteForToday('investing', QUOTES_INVESTING);
  const qp = getQuoteForToday('psychology', QUOTES_PSYCHOLOGY);
  document.getElementById('qt-inv-text').textContent = '‚Äú' + qi.text + '‚Äù';
  document.getElementById('qt-inv-auth').textContent = '‚Äî ' + qi.author;
  document.getElementById('qt-psy-text').textContent = '‚Äú' + qp.text + '‚Äù';
  document.getElementById('qt-psy-auth').textContent = '‚Äî ' + qp.author;
})();

// Recommendations are now server-side rendered (live trending data)
</script>
</body>
</html>